{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useContext, useEffect } from \"react\";\nimport socket from \"../../socket\";\nimport { AccountContext } from \"../AccountContext\";\nconst useSocketSetup = _ref => {\n  _s();\n  let {\n    setFriendList,\n    setMessages\n  } = _ref;\n  const {\n    setUser\n  } = useContext(AccountContext);\n  useEffect(() => {\n    socket.connect();\n    socket.on(\"friends\", friendList => {\n      console.log(friendList);\n      setFriendList(friendList);\n    });\n    socket.on(\"messages\", messages => {\n      setMessages(messages);\n    });\n    socket.on(\"dm\", message => {\n      setMessages(prevMsgs => [message, ...prevMsgs]);\n    });\n    socket.on(\"connected\", (status, username) => {\n      setFriendList(prevFriends => {\n        return [...prevFriends].map(friend => {\n          if (friend.username === username) {\n            friend.connected = status;\n          }\n          return friend;\n        });\n      });\n    });\n    socket.on(\"connect_error\", () => {\n      setUser({\n        loggedIn: false\n      });\n    });\n    return () => {\n      socket.off(\"connect_error\");\n      socket.off(\"connected\");\n      socket.off(\"friends\");\n      socket.off(\"messages\");\n      socket.off(\"dm\");\n    };\n  }, [setUser, setFriendList, setMessages]);\n};\n_s(useSocketSetup, \"BemzQuH4f11cYQSenZt5+cm7gqw=\");\nexport default useSocketSetup;","map":{"version":3,"names":["useContext","useEffect","socket","AccountContext","useSocketSetup","_ref","_s","setFriendList","setMessages","setUser","connect","on","friendList","console","log","messages","message","prevMsgs","status","username","prevFriends","map","friend","connected","loggedIn","off"],"sources":["/Users/rgthardkor/Projects/messendger/frontend/chat_client/src/components/Home/useSocketSetup.jsx"],"sourcesContent":["import {useContext, useEffect} from \"react\";\nimport socket from \"../../socket\";\nimport {AccountContext} from \"../AccountContext\";\n\nconst useSocketSetup = ({setFriendList, setMessages}) => {\n    const {setUser} = useContext(AccountContext)\n    useEffect(() => {\n        socket.connect()\n        socket.on(\"friends\", friendList => {\n            console.log(friendList)\n            setFriendList(friendList)\n        })\n        socket.on(\"messages\", messages => {\n            setMessages(messages);\n\n        })\n        socket.on(\"dm\", message => {\n            setMessages(prevMsgs => [message, ...prevMsgs]);\n        });\n\n        socket.on(\"connected\", (status, username) => {\n            setFriendList(prevFriends => {\n                return [...prevFriends].map(friend => {\n                    if (friend.username === username) {\n                        friend.connected = status;\n                    }\n                    return friend\n                })\n            })\n        })\n\n        socket.on(\"connect_error\", () => {\n            setUser({loggedIn: false})\n        })\n        return () => {\n            socket.off(\"connect_error\")\n            socket.off(\"connected\")\n            socket.off(\"friends\")\n            socket.off(\"messages\")\n            socket.off(\"dm\")\n\n        }\n    }, [setUser, setFriendList, setMessages])\n}\nexport default useSocketSetup;"],"mappings":";AAAA,SAAQA,UAAU,EAAEC,SAAS,QAAO,OAAO;AAC3C,OAAOC,MAAM,MAAM,cAAc;AACjC,SAAQC,cAAc,QAAO,mBAAmB;AAEhD,MAAMC,cAAc,GAAGC,IAAA,IAAkC;EAAAC,EAAA;EAAA,IAAjC;IAACC,aAAa;IAAEC;EAAW,CAAC,GAAAH,IAAA;EAChD,MAAM;IAACI;EAAO,CAAC,GAAGT,UAAU,CAACG,cAAc,CAAC;EAC5CF,SAAS,CAAC,MAAM;IACZC,MAAM,CAACQ,OAAO,EAAE;IAChBR,MAAM,CAACS,EAAE,CAAC,SAAS,EAAEC,UAAU,IAAI;MAC/BC,OAAO,CAACC,GAAG,CAACF,UAAU,CAAC;MACvBL,aAAa,CAACK,UAAU,CAAC;IAC7B,CAAC,CAAC;IACFV,MAAM,CAACS,EAAE,CAAC,UAAU,EAAEI,QAAQ,IAAI;MAC9BP,WAAW,CAACO,QAAQ,CAAC;IAEzB,CAAC,CAAC;IACFb,MAAM,CAACS,EAAE,CAAC,IAAI,EAAEK,OAAO,IAAI;MACvBR,WAAW,CAACS,QAAQ,IAAI,CAACD,OAAO,EAAE,GAAGC,QAAQ,CAAC,CAAC;IACnD,CAAC,CAAC;IAEFf,MAAM,CAACS,EAAE,CAAC,WAAW,EAAE,CAACO,MAAM,EAAEC,QAAQ,KAAK;MACzCZ,aAAa,CAACa,WAAW,IAAI;QACzB,OAAO,CAAC,GAAGA,WAAW,CAAC,CAACC,GAAG,CAACC,MAAM,IAAI;UAClC,IAAIA,MAAM,CAACH,QAAQ,KAAKA,QAAQ,EAAE;YAC9BG,MAAM,CAACC,SAAS,GAAGL,MAAM;UAC7B;UACA,OAAOI,MAAM;QACjB,CAAC,CAAC;MACN,CAAC,CAAC;IACN,CAAC,CAAC;IAEFpB,MAAM,CAACS,EAAE,CAAC,eAAe,EAAE,MAAM;MAC7BF,OAAO,CAAC;QAACe,QAAQ,EAAE;MAAK,CAAC,CAAC;IAC9B,CAAC,CAAC;IACF,OAAO,MAAM;MACTtB,MAAM,CAACuB,GAAG,CAAC,eAAe,CAAC;MAC3BvB,MAAM,CAACuB,GAAG,CAAC,WAAW,CAAC;MACvBvB,MAAM,CAACuB,GAAG,CAAC,SAAS,CAAC;MACrBvB,MAAM,CAACuB,GAAG,CAAC,UAAU,CAAC;MACtBvB,MAAM,CAACuB,GAAG,CAAC,IAAI,CAAC;IAEpB,CAAC;EACL,CAAC,EAAE,CAAChB,OAAO,EAAEF,aAAa,EAAEC,WAAW,CAAC,CAAC;AAC7C,CAAC;AAAAF,EAAA,CAvCKF,cAAc;AAwCpB,eAAeA,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}